<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../displayToc.js"></script>
<script language="JavaScript" src="../tocParas.js"></script>
<script language="JavaScript" src="../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../scineplex.css">
<title>idl2xs_c - IDL compiler to extension interface between Perl and C code</title>
<link rel="stylesheet" href="../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<script>writelinks('__top__',1);</script>
<h1><a>idl2xs_c - IDL compiler to extension interface between Perl and C code</a></h1>
<p><a name="__index__"></a></p>


<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#tutorial">TUTORIAL</a></li>
	<ul>

		<li><a href="#example_1">EXAMPLE 1</a></li>
		<li><a href="#example_2">EXAMPLE 2</a></li>
		<li><a href="#example_3">EXAMPLE 3</a></li>
	</ul>

	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>idl2xs_c - IDL compiler to extension interface between Perl and C code</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>idl2xs_c [options] <em>spec</em>.idl</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<p>All options are forwarded to C preprocessor, except -h -i -J -v -x.</p>
<p>With the GNU C Compatible Compiler Processor, useful options are :</p>
<dl>
<dt><strong><a name="d_name" class="item"><strong>-D</strong> <em>name</em></a></strong>

<dt><strong><a name="d_name_definition" class="item"><strong>-D</strong> <em>name</em>=<em>definition</em></a></strong>

<dt><strong><a name="i_directory" class="item"><strong>-I</strong> <em>directory</em></a></strong>

<dt><strong><a name="i" class="item"><strong>-I-</strong></a></strong>

<dt><strong><a name="nostdinc" class="item"><strong>-nostdinc</strong></a></strong>

</dl>
<p>Specific options :</p>
<dl>
<dt><strong><a name="h" class="item"><strong>-h</strong></a></strong>

<dd>
<p>Display help.</p>
</dd>
</li>
<dt><strong><a name="i_directory" class="item"><strong>-i</strong> <em>directory</em></a></strong>

<dd>
<p>Specify a path for import (only for version 3.0).</p>
</dd>
</li>
<dt><strong><a name="j_directory" class="item"><strong>-J</strong> <em>directory</em></a></strong>

<dd>
<p>Specify a path for Perl package importation (use <em>package</em>;).</p>
</dd>
</li>
<dt><strong><a name="v" class="item"><strong>-v</strong></a></strong>

<dd>
<p>Display version.</p>
</dd>
</li>
<dt><strong><a name="x" class="item"><strong>-x</strong></a></strong>

<dd>
<p>Enable export (only for version 3.0).</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><strong>idl2xs_c</strong> is an alternative to <strong>h2xs</strong> and <strong>XS</strong> language when an <strong>IDL</strong> interface is available.</p>
<p><strong>idl2xs_c</strong> parses the given input file (IDL) and generates :</p>
<ul>
<li><strong><a name="a_perl_stub_spec_pm" class="item">a Perl stub <em>spec</em>.pm</a></strong>

<p>(deals with CDR serialization, and autoload)</p>
</li>
<li><strong><a name="a_c_stub_spec_c" class="item">a C stub <em>spec</em>.c</a></strong>

<p>(deals with Perl API)</p>
</li>
<li><strong><a name="a_c_stub_cdr_spec_c" class="item">a C stub cdr_<em>spec</em>.c</a></strong>

<p>(deals with CDR serialization)</p>
</li>
<li><strong><a name="a_include_file_spec_h" class="item">a include file <em>spec</em>.h</a></strong>

<p>(following the language C mapping rules)</p>
</li>
<li><strong><a name="c" class="item">a C skeleton skel_<em>spec</em>.c (with automatic merge)</a></strong>

<li><strong><a name="makefile_pl" class="item">Makefile.PL</a></strong>

<li><strong><a name="makefile" class="item">Makefile</a></strong>

<p>(from Makefile.PL)</p>
</li>
<li><strong><a name="test_pl" class="item">test.pl</a></strong>

<li><strong><a name="manifest" class="item">MANIFEST</a></strong>

<li><strong><a name="changes" class="item">Changes</a></strong>

</ul>
<p>The files Makefile, Makefile.PL, Changes, MANIFEST, test.pl and <em>spec</em>.c are
generated only if <em>spec</em>.idl contains operation or attribute.</p>
<p><strong>idl2xs_c</strong> is a Perl OO application what uses the visitor design pattern.
The parser is generated by Parse::Yapp.</p>
<p><strong>idl2xs_c</strong> needs a <strong>cpp</strong> executable.</p>
<p><strong>idl2xs_c</strong> needs CORBA::IDL, CORBA::C and CORBA::Perl modules.</p>
<p>CORBA Specifications, including (IDL : Interface Language Definition and
CDR : Common Data Representation) and
C Language Mapping are available on &lt;<a href="http://www.omg.org/">http://www.omg.org/</a>&gt;.</p>
<p>CORBA mapping for Perl [mapping.pod - Draft 1, 7 October 1999] comes with the package
CORBA::MICO or CORBA::ORBit.</p>
<p>Exceptions are implemented using the Error module.</p>
<p>
</p>
<hr />
<h1><a name="tutorial">TUTORIAL</a></h1>
<p>
</p>
<h2><a name="example_1">EXAMPLE 1</a></h2>
<p>The file Calc.idl describes the interface of a simple calculator.</p>
<p>First, run :</p>
<pre>
    idl2xs_c Calc.idl</pre>
<p>Second, in skel_Calc.c complete each methode between tag
START_EDIT and STOP_EDIT :</p>
<pre>
    <span class="regex">//</span> <span class="variable">IDL</span> <span class="operator">:</span> <span class="variable">long</span> <span class="variable">Add</span><span class="operator">(</span><span class="variable">in</span> <span class="variable">long</span> <span class="variable">val1</span><span class="operator">,</span> <span class="variable">in</span> <span class="variable">long</span> <span class="variable">val2</span><span class="operator">);</span>
</pre>
<pre>
    <span class="variable">CORBA_long</span>
    <span class="variable">Calc_Add</span><span class="operator">(</span>
        <span class="variable">Calc</span> <span class="variable">_o</span><span class="operator">,</span>
        <span class="variable">CORBA_long</span> <span class="variable">val1</span><span class="operator">,</span> <span class="regex">//</span> <span class="variable">in</span> <span class="operator">(</span><span class="variable">fixed</span> <span class="keyword">length</span><span class="operator">)</span>
        <span class="variable">CORBA_long</span> <span class="variable">val2</span><span class="operator">,</span> <span class="regex">//</span> <span class="variable">in</span> <span class="operator">(</span><span class="variable">fixed</span> <span class="keyword">length</span><span class="operator">)</span>
        <span class="variable">CORBA_Environment</span> <span class="operator">*</span> <span class="variable">_ev</span>
    <span class="operator">)</span>
    <span class="operator">{</span>
    <span class="regex">/* START_EDIT (Calc_Add) */</span>
        <span class="keyword">return</span> <span class="variable">val1</span> <span class="operator">+</span> <span class="variable">val2</span><span class="operator">;</span>
    <span class="regex">/* STOP_EDIT (Calc_Add) */</span>
    <span class="operator">}</span>
</pre>
<p>Third, build :</p>
<pre>
    make
    make test
    make install</pre>
<p>Fourth, if you use Test::Unit, you can continue with :</p>
<pre>
    cd testunit
    testrunner suite_calc</pre>
<p>Finally, using the extension module :</p>
<pre>
    <span class="keyword">use</span> <span class="variable">Calc</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">$calc</span> <span class="operator">=</span> <span class="variable">new</span> <span class="variable">Calc</span><span class="operator">();</span>
    <span class="keyword">print</span> <span class="variable">$calc</span><span class="operator">-&gt;</span><span class="variable">Add</span><span class="operator">(</span><span class="number">2</span><span class="operator">,</span> <span class="number">3</span><span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="example_2">EXAMPLE 2</a></h2>
<p>Now, a complex calculator with two IDL files.</p>
<p>Cplx.idl contains :</p>
<pre>
    <span class="variable">module</span> <span class="variable">Cplx</span> <span class="operator">{</span>
        <span class="variable">struct</span> <span class="variable">Complex</span> <span class="operator">{</span>
            <span class="variable">float</span>   <span class="variable">re</span><span class="operator">;</span>
            <span class="variable">float</span>   <span class="variable">im</span><span class="operator">;</span>
        <span class="operator">};</span>
    <span class="operator">};</span>
</pre>
<p>and CalcCplx.idl contains :</p>
<pre>
    <span class="comment">#include "Cplx.idl"</span>
    <span class="variable">interface</span> <span class="variable">CalcCplx</span> <span class="operator">{</span>
        <span class="variable">Cplx::Complex</span> <span class="variable">Add</span><span class="operator">(</span><span class="variable">in</span> <span class="variable">Cplx::Complex</span> <span class="variable">val1</span><span class="operator">,</span> <span class="variable">in</span> <span class="variable">Cplx::Complex</span> <span class="variable">val2</span><span class="operator">);</span>
        <span class="variable">Cplx::Complex</span> <span class="variable">Sub</span><span class="operator">(</span><span class="variable">in</span> <span class="variable">Cplx::Complex</span> <span class="variable">val1</span><span class="operator">,</span> <span class="variable">in</span> <span class="variable">Cplx::Complex</span> <span class="variable">val2</span><span class="operator">);</span>
    <span class="operator">};</span>
</pre>
<p>First, run :</p>
<pre>
    idl2xs_c Cplx.idl
    idl2xs_c CalcCplx.idl</pre>
<p>Second, complete skel_CplxCalc.c.</p>
<p>Third, build :</p>
<pre>
    make
    make test
    make install</pre>
<p>
</p>
<h2><a name="example_3">EXAMPLE 3</a></h2>
<p>Variante of a complex calculator with two IDL files.
This is another decomposition of IDL specification.</p>
<p>Cplx.idl is the same, CalcCplx.idl contains :</p>
<pre>
    <span class="comment">#include "Cplx.idl"</span>
    <span class="variable">module</span> <span class="variable">Cplx</span> <span class="operator">{</span>
        <span class="variable">interface</span> <span class="variable">CalcCplx</span> <span class="operator">{</span>
            <span class="variable">Complex</span> <span class="variable">Add</span><span class="operator">(</span><span class="variable">in</span> <span class="variable">Complex</span> <span class="variable">val1</span><span class="operator">,</span> <span class="variable">in</span> <span class="variable">Complex</span> <span class="variable">val2</span><span class="operator">);</span>
            <span class="variable">Complex</span> <span class="variable">Sub</span><span class="operator">(</span><span class="variable">in</span> <span class="variable">Complex</span> <span class="variable">val1</span><span class="operator">,</span> <span class="variable">in</span> <span class="variable">Complex</span> <span class="variable">val2</span><span class="operator">);</span>
        <span class="operator">};</span>
    <span class="operator">};</span>
</pre>
<p>The build process is the same.</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>cpp, perl, idl2html, idl2c</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>(c) 2002-2007 Francois PERRAD, France. All rights reserved.</p>
<p>This program and all CORBA::XS modules are distributed
under the terms of the Artistic Licence.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Francois PERRAD, <a href="mailto:francois.perrad@gadz.org">francois.perrad@gadz.org</a></p>

</body>

</html>
